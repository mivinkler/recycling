{# templates/unload/unload_create.html #}

{% extends 'base.html' %}
{% load static %}

{% block title %}Vorsortierung{% endblock %}

{% block content %}
<form method="post">
  {% csrf_token %}

  <div class="itemcard">
    <div class="itemcard-title">
      <h2>Vorsortierung</h2>
    </div>

    <section class="itemcard-topbox">
      <div class="itemcard-topbox-row">
        <h3>Liefereinheit: &emsp; {{ delivery_unit }}</h3>
      </div>
    </section>

    <section class="itemcard-topbox">
      <h4>Vorsortierung-Wagen:</h4>

      <table class="itemcard-table">
        <thead class="itemcard-thead">
          <tr>
            <th class="itemcard-id">№</th>
            <th class="itemcard-material">Material</th>
            <th class="itemcard-boxtype">Behälter</th>
            <th class="itemcard-status">Position</th>
            <th class="itemcard-note">Anmerkung</th>
            <th class="itemcard-weight">Gewicht</th>
            <th class="itemcard-action"></th>
          </tr>
        </thead>

        {# ====== Aktive Wagen ====== #}
        <tbody class="itemcard-tbody">
          {% for item in unloads %}
            <tr class="itemcard-table-row">
              <td class="itemcard-id">{{ forloop.counter }}</td>
              <td class="itemcard-material"><p>{{ item.material }}</p></td>
              <td class="itemcard-boxtype"><p>{{ item.get_box_type_display }}</p></td>
              <td class="itemcard-status"><p>{{ item.get_status_display }}</p></td>
              <td class="itemcard-note"><p>{{ item.note }}</p></td>
              <td class="itemcard-weight"><p>{{ item.weight }}</p></td>
              <td class="itemcard-action-wrapper">
                <div class="itemcard-action">
                  <a href="{% url 'unload_update' delivery_unit_pk=delivery_unit.pk unload_pk=item.pk %}" class="btn btn-lock">
                    <img src="{% static 'icons/lock-icon.svg' %}">
                  </a>
                </div>
              </td>
            </tr>
          {% empty %}
            <tr class="itemcard-table-row">
              <td colspan="6" class="text-center">Keine Daten vorhanden</td>
            </tr>
          {% endfor %}

          {# --- Neue Wagen --- #}
          <tr class="itemcard-table-row">
            <td class="itemcard-id"></td>
            <td class="itemcard-material">{{ form.material }}</td>
            <td class="itemcard-boxtype">{{ form.box_type }}</td>
            <td class="itemcard-status">{{ form.status }}</td>
            <td class="itemcard-note">{{ form.note }}</td>
            <td class="itemcard-weight">{{ form.weight }}</td>
            <td class="itemcard-action-wrapper">
              <div class="itemcard-action">
                <button type="button" class="btn btn-lock">
                  <img class="icon-lock-open" src="{% static 'icons/lock-open-icon.svg' %}">
                </button>

                <button type="submit" class="btn btn-main btn-save">Speichern</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</form>
{% endblock %}