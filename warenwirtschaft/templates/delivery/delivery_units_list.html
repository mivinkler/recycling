{% extends 'base.html' %}

{% load custom_filters %}
{% load pagination %}
{% load sorting %}
{% load static %}

{% block title %}{{ _("Einheiten") }}{% endblock %}

{% block content %}

<div class="table-header">
    <div>
        ANDERWERK <span style="color: red; font-weight: bold; width: 100px;">❯</span>
    </div>
    <div class="table-header-user">
        <div>Max Musterman</div>
        <img class="user-white-icon" src="/static/icons/user-white-icon.svg">
    </div>
</div>

<div class="top-menu">
    <div><a href="{% url 'suppliers_list' %}" class="{% if selected_menu == 'supplier_list' %} selected {% endif %}">Lieferanten</a></div>
    <div><a href="{% url 'delivery_units_list' %}">Eingang</a></div>
    <div><a href="{% url 'unloads_list' %}">Leerung</a></div>
    <div><a href="{% url 'unloads_list' %}">Recycling</a></div>
    <div><a href="{% url 'unloads_list' %}">Versand</a></div>
</div>

{% include 'components/top_navi.html' %}

<table class="selectable-table">


    <thead>
        <tr class="thead-title">
            <th>№</th>
            <th>Lieferant</th>
            <th>Lieferschein</th>
            <th>Datum</th>
            <th>Gesamtgewicht</th>
            <th>LID</th>
            <th>Behälter</th>
            <th>Material</th>
            <th>Gewicht</th>
            <th>Status</th>
            <th>Bemerkung</th>
            <th></th>
        </tr>
    </thead>

    <tbody>
        {% for item in page_obj %}
        <tr class="selectable-row" data-id="{{ item.id }}" data-url-detail="{% url 'delivery_detail' pk=item.id %}" data-url-update="{% url 'delivery_update' pk=item.id %}">
            <td class="tbody-input">
                <input type="radio" value="{{ item.id }}">
            </td>
            <td class="tbody-id">{{ item.id }}</td>
            <td class="tbody-name">{{ item.delivery.supplier.name }}</td>
            <td class="tbody-delivery-receipt">{{ item.delivery.delivery_receipt }}</td>
            <td class="tbody-data">{{ item.created_at|date:"d.m.Y" }}</td>
            <td class="tbody-weight">{{ item.delivery.total_weight }}</td>
            <td class="tbody-lid">{{ item.delivery_id }}</td>
            <td class="tbody-delivery-type">{{ item|getattr:"get_delivery_type_display" }}</td>
            <td class="tbody-material">{{ item.material }}</td>
            <td class="tbody-weight">{{ item.weight }} </td>
            <td class="tbody-status">{{ item|getattr:"get_status_display" }}</td>
            <td class="tbody-note" title="{{ item.note }}"><p>{{ item.note }}</p></td>
            
        </tr>
        {% endfor %}
    </tbody>
</table>

{% paginate page_obj %}

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/selectable-row.js' %}"></script>
    <script src="{% static 'js/block_visibility.js' %}"></script>
    <script src="{% static 'js/current-date.js' %}"></script>
{% endblock %}
