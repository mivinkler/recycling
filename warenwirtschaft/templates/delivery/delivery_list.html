{% extends 'base.html' %}

{% load static %}
<!-- {% load pagination %} -->
{% load sorting %}

{% block title %}{{ _("Lieferungen") }}{% endblock %}

{% block content %}

<!-- <div class="table-action">
    <button class="table-search btn-activ toggle-button">üîç</button>
    <button class="table-reset btn-activ"><a href="{% url 'deliveries_list' %}" class="reset-btn">‚ü≤</a></button>
</div> -->
<div class="table-head">
    <div class="table-head-title">Lieferungen<a href="{% url 'deliveries_list' %}"> ‚ü≤</a></div>
    <div class="table-head-search">
      <form method="GET">
        <input type="text" name="search" placeholder="Suchen..." value="{{ search_query }}">
        <button type="submit">üîç</button>
      </form>
    </div>
  </div>
<table class="table-box">

    <thead>
        <tr class="table-content-title">
            <th>{% sort "&#8470;" "id" request.GET.sort %}</th>
            <th>{% sort "Lieferant" "supplier" request.GET.sort %}</th>
            <th>{% sort "Lieferschein" "delivery_receipt" request.GET.sort %}</th>
            <th>{% sort "Gewicht" "weight" request.GET.sort %}</th>
            <th>{% sort "Datum" "delivery_date" request.GET.sort %}</th>
            <th>{% sort "Beh√§lter" "container" request.GET.sort %}</th>
            <th>{% sort "Material" "device" request.GET.sort %}</th>
            <th>{% sort "Gewicht" "weight" request.GET.sort %}</th>
            <th>{% sort "Status" "status" request.GET.sort %}</th>
        </tr>
    </thead>
    <tbody class="table-content">
        {% for delivery in page_obj %}
            {% for unit in delivery.deliveryunits.all %}
                <tr>
                    {% if forloop.first %} {# –¢–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ Delivery #}
                        <td rowspan="{{ delivery.deliveryunits.all|length }}">{{ delivery.id }}</td>
                        <td rowspan="{{ delivery.deliveryunits.all|length }}">{{ delivery.supplier.name }}</td>
                        <td rowspan="{{ delivery.deliveryunits.all|length }}">{{ delivery.delivery_receipt }}</td>
                        <td rowspan="{{ delivery.deliveryunits.all|length }}">{{ delivery.weight }}</td>
                        <td rowspan="{{ delivery.deliveryunits.all|length }}">{{ delivery.delivery_date|date:"d.m.Y" }}</td>
                    {% endif %}
                    <td>{{ unit.delivery_type }}</td>
                    <td>{{ unit.device }}</td>
                    <td>{{ unit.weight }} </td>
                    <td>{{ unit.status }}</td>
                    <!-- {% if forloop.first %}
                        <td rowspan="{{ delivery.deliveryunits.all|length }}" class="suppler-icons">
                            <a href="{% url 'delivery_detail' pk=delivery.id %}" title="Detail">
                                <img src="{% static 'icons/detail-icon.svg' %}">   
                            </a>
                            <a href="#" title="Bearbeiten"> 
                                <img src="{% static 'icons/update-icon.svg' %}">
                            </a>
                        </td>
                    {% endif %} -->
                </tr>          
            {% endfor %}
        {% endfor %}
    </tbody>
</table>

{% paginate page_obj %}

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/block_visibility.js' %}"></script>
{% endblock %}

