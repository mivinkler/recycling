{# templates/unload/unload_update.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}Eingang erstellen{% endblock %}

{% block content %}
<form method="post">
  {% csrf_token %}

  <div class="itemcard">
    <div class="itemcard-title">
      <h2>Wareneingang erstellen</h2>
    </div>


    <section class="itemcard-topbox">
      <div class="itemcard-topbox-row">
        <h4>Lieferant:</h4>
        <p>{{ delivery.customer }}</p>
      </div>

      <div class="itemcard-topbox-row">
        <h4 for="id_delivery_receipt">Lieferschein:</h4>
        <p>{{ delivery.delivery_receipt }}</p>
      </div>
    </section>


    <section class="itemcard-topbox">
      <h4>Liefereinheiten:</h4>

      <table class="itemcard-table">
        <thead class="itemcard-thead">
          <tr>
            <th class="itemcard-id">№</th>
            <th class="itemcard-material">Material</th>
            <th class="itemcard-boxtype">Behälter</th>
            <th class="itemcard-note">Anmerkung</th>
            <th class="itemcard-weight">Gewicht</th>
            <th class="itemcard-action"></th>
          </tr>
        </thead>

        <tbody class="itemcard-tbody">
          {% for item in delivery_units %}
            {% if item.pk == edit_delivery_unit.pk %}
              <tr class="itemcard-table-row">
                <td class="itemcard-id">
                  <a href="#"
                    class="material-delete" title="Löschen">
                    <img src="{% static 'icons/delete-icon.svg' %}" alt="">
                  </a>
                </td>
                <td class="itemcard-material">{{ form.material }}</td>
                <td class="itemcard-boxtype">{{ form.box_type }}</td>
                <td class="itemcard-note">{{ form.note }}</td>
                <td class="itemcard-weight">{{ form.weight }} </td>
                <td class="itemcard-action-wrapper">
                  <div class="itemcard-action">
                    <button type="button" class="btn btn-lock">
                      <img class="icon-lock-open" src="{% static 'icons/lock-open-icon.svg' %}">
                    </button>

                    <button type="submit" class="btn btn-main btn-save">Speichern</button>
                  </div>
                </td>
              </tr>
            {% else %}
              <tr class="itemcard-table-row">
                <td class="itemcard-id">{{ forloop.counter }}</td>
                <td class="itemcard-material">{{ form.material }}</td>
                <td class="itemcard-boxtype">{{ form.box_type }}</td>
                <td class="itemcard-weight">{{ form.weight }}</td>
                <td class="itemcard-note">{{ form.note }}</td>
                <td class="itemcard-action-wrapper">
                  <div class="itemcard-action">
                    <a href="{% url 'delivery_update' delivery_pk=delivery.pk delivery_unit_pk=delivery_unit.pk %}" class="btn btn-lock">
                      <img src="{% static 'icons/lock-icon.svg' %}">
                    </a>
                  </div>
                </td>
              </tr>
            {% endif %}
          {% endfor %}
          <tr class="itemcard-table-row">
            <td class="itemcard-id"></td>
            <td class="itemcard-material"></td>
            <td class="itemcard-boxtype"></td>
            <td class="itemcard-weight"></td>
            <td class="itemcard-note"></td>
            <td class="itemcard-action-wrapper">
              <div class="itemcard-action">
                <a href="{% url 'delivery_create' %}" class="btn btn-lock">
                  <img src="{% static 'icons/lock-icon.svg' %}">
                </a>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</form>
{% endblock %}